{"version":3,"file":"dist/app.js","sources":["lib/config.coffee","lib/helpers/backbone_notification.js","lib/helpers/custom_exception.coffee","lib/helpers/domains-definition.js","lib/helpers/domains.js","lib/helpers/error_helper.js","lib/helpers/form_helper.js","lib/helpers/header_helper.js","lib/helpers/metadata_builder.coffee","lib/helpers/model-validation-promise.js","lib/helpers/odata_helper.js","lib/helpers/promisify_helper.js","lib/helpers/reference_helper.js","lib/helpers/router.coffee","lib/helpers/site_description.js","lib/helpers/url_helper.js","lib/helpers/validators.js","lib/helpers/view_helper.coffee","lib/models/URL.js","lib/models/model.coffee","lib/models/notification.js","lib/models/notifications.js","lib/models/paginatedCollection.js","lib/views/collection-pagination-view.js","lib/views/detail-consult-view.js","lib/views/detail-edit-view.js","lib/views/notifications-view.js","lib/views/search-results-view.js","lib/views/search-view.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;A;;CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhDA;;A;ACCA;;;;;AACc,2BAAE,IAAF,EAAS,OAAT,EAAkB,OAAlB;AAA2B,IAA1B,IAAC,YAAyB;IAAnB,IAAC,kBAAkB;IAAV,IAAC,kBAAS,CAA3B;GAAZ;;4BACA,MAAI;WACF,OAAO,CAAC,GAAR,CAAY,MAAZ,EAAoB,IAAC,KAArB,EAA2B,SAA3B,EAAsC,IAAC,QAAvC,EAAgD,SAAhD,EAA2D,IAAC,QAA5D,EADE;GADJ;;;;IADF;;;AAME;;AAAY,mCAAC,OAAD,EAAU,OAAV;AACV,6DAAM,yBAAN,EAAiC,OAAjC,EAA0C,OAA1C,EADU;GAAZ;;;;GADoC,gBALtC;;;AAUE;;AAAY,iCAAC,OAAD;AACV,2DAAM,cAAN,EAAsB,OAAtB,EADU;GAAZ;;;;GADkC,gBATpC;;;AAcE;;AAAY,oCAAC,OAAD,EAAU,OAAV;AACV,8DAAM,0BAAN,EAAkC,OAAlC,EAA2C,OAA3C,EADU;GAAZ;;;;GADqC,gBAbvC;;;AAiBE;;AAAY,+BAAC,OAAD;AACV,yDAAM,qBAAN,EAA6B,OAA7B,EADU;GAAZ;;;;GADgC,gBAhBlC;;MAmBM,CAAC,OAAP,GACC;mBAAiB,eAAjB;EACA,yBAAyB,uBADzB;EAEA,uBAAuB,qBAFvB;EAGA,0BAA0B,wBAH1B;CApBD;A;;CCDA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7FA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1DA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvEA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApFA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBA;;A;ACEA;;wBAAwB,QAAQ,oBAAR,CAA6B,CAAC,qBAAtD;;wBAEA,GAA2B,EAF3B;;OAKA,GAAU,QAAQ,WAAR,CALV;;yBAOA,GAA4B,SAAC,KAAD;AAE1B;MAAkG,aAAlG;WAAW,0BAAsB,wDAAtB,CAAX;;EAEA,YAAY,KAAK,CAAC,SAFlB;AAGA,MAA4E,iBAA5E;UAAU,0BAAsB,kCAAtB,CAAV;GAHA;AAIA,MAAQ,iBAAR;AACE,gBAAY,yBAAZ,CADF;GAJA;EAOA,cAAc,EAPd;AASA;AAEE,eAAW,EAAX;IACA,KAAK,SAAU,MAAV,IAAmB,EADxB;AAEA,QAAG,CAAC,gCAAwB,EAAE,CAAC,eAAH,KAAsB,KAA/C,KAAyD,CAAK,0BAAL,CAA5D;AACC,UAAmC,mBAAnC;SAAC,CAAC,MAAF,CAAS,QAAT,EAAmB,EAAE,CAAC,QAAtB;;AACA,UAAiC,iBAAjC;QAAC,QAAQ,CAAC,MAAT,GAAkB,EAAE,CAAC,MAAtB;OADA;AAEA,UAAqC,mBAArC;QAAC,QAAQ,CAAC,QAAT,GAAoB,EAAE,CAAC,QAAxB;OAFA;MAKA,aAAa,EALb;AAOA,UAAuD,QAAQ,CAAC,QAAhE;kBAAU,CAAC,IAAX,CAAgB;UAAC,QAAQ,UAAT;UAAoB,SAAS,IAA7B;SAAhB;OAPA;AASA,UAA2E,6BAAqB,kCAAhG;QAAC,aAAa,CAAC,CAAC,KAAF,CAAQ,UAAR,EAAoB,OAAQ,SAAQ,CAAC,MAAT,CAAgB,CAAC,UAA7C,CAAd;OATA;MAWA,WAAY,MAAZ,GAAoB,UAXpB,CADD;KAJF;GATA;AA0BA,SAAO,WAAP,CA5B0B;CAP5B;;0BAqCA,GAA6B,SAAC,KAAD;AAC3B,SAAO,0BAA0B,KAA1B,CAAP;AACA,MAAoD,6BAAqB,mDAAzE;WAAO,wBAAyB,MAAK,CAAC,SAAN,CAAhC;GADA;AAEA,MAAG,uBAAH;AACE,WAAO,wBAAyB,MAAK,CAAC,SAAN,CAAzB,GAA4C,0BAA0B,KAA1B,CAAnD,CADF;;AAGE,WAAO,0BAA0B,KAA1B,CAAP,CAHF;GAH2B;CArC7B;;MA4CM,CAAC,OAAP,GACE;6BAA2B,yBAA3B;EACA,kBAAkB,0BADlB;CA7CF;A;;CCFA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5DA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7HA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3FA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1CA;;A;ACAA;;;;;cAAc,QAAQ,aAAR,CAAd;;UACA,GAAa,QAAQ,mBAAR,CADb;;QAEA,GAAW,QAAQ,iBAAR,CAFX;;SAGA,GAAY,QAAQ,kBAAR,CAHZ;;WAIA,GAAc,QAAQ,oBAAR,CAJd;;UAKA,GAAa,QAAQ,mBAAR,CALb;;oBAMA,GAAuB,QAAQ,6BAAR,CANvB;;wBAOA,GAA2B,QAAQ,kCAAR,CAP3B;;gCAQA,GAAmC,QAAQ,4BAAR,CARnC;;cASA,GAAiB,QAAQ,uBAAR,CATjB;;kBAUA,GAAqB,QAAQ,2BAAR,CAVrB;;0BAWA,GAA6B,QAAQ,oCAAR,CAX7B;;sBAYA,GAAyB,QAAQ,gCAAR,CAZz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;WAEA,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,IAA3B,CAAgC,IAAhC,EAHS;GAtFZ;;mBA0FC,SAAQ,SAAC,SAAD;AACN;;;;;;;;WAMA,OAAO,CAAC,GAAR,CAAY,QAAZ,EAAsB,SAAtB,EAPM;GA1FT;;mBAkGC,SAAQ,SAAC,SAAD;WACN,OAAO,CAAC,GAAR,CAAY,QAAZ,EAAsB,SAAtB,EADM;GAlGT;;mBAoGC,OAAM,SAAC,SAAD,EAAY,EAAZ;WACJ,OAAO,CAAC,GAAR,CAAY,MAAZ,EAAoB,SAApB,EADI;GApGP;;mBAsGC,OAAM,SAAC,SAAD,EAAY,EAAZ;WACJ,OAAO,CAAC,GAAR,CAAY,MAAZ,EAAoB,SAApB,EADI;GAtGP;;mBAwGC,OAAK,SAAC,SAAD,EAAY,EAAZ;WACH,OAAO,CAAC,GAAR,CAAY,MAAZ,EAAoB,SAApB,EADG;GAxGN;;;;GAFqC,QAAQ,CAAC,OAnB/C;A;;CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7EA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjFA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/FA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3FA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnJA;;A","sourcesContent":["","/*global $*/\nvar Notifications = require('../models/notifications');\nvar NotificationsView = require('../views/notifications-view');\n//Container specific to the application in order to manipulate the notification the way we want.\nvar backboneNotification = {\n  //Contain the a notifications viex in order to add notifications and render it.\n  notificationsView: new NotificationsView({\n    model: new Notifications()\n  }),\n  addNotification: function addNotification(jsonNotification, isRender) {\n    isRender = isRender || false;\n    this.notificationsView.model.add(jsonNotification);\n    if (isRender) {\n      this.renderNotifications();\n    }\n  },\n  //Render all the notifications which are in the notifications collection and then clear this list.\n  renderNotifications: function renderInApplication(selectorToRender, timeout) {\n    var selector = selectorToRender || \"div#summary\";\n    //We render all the messages.\n    $(selector).html(this.notificationsView.render().el);\n    //We empty the collection which contains all the notification messages.\n    this.notificationsView.model.reset();\n    $('button').button('reset');\n    var that = this;\n    //timeout = timeout || 5;\n    /*Notifications are displayed only timeout seconds.*/\n    if (timeout !== null && timeout !== undefined) {\n      setTimeout(function() {\n        that.clearNotifications(selector);\n      }, timeout * 1000);\n    }\n  },\n  //Clear all the notifications in the application on application screen but do not clear the collection.\n  clearNotifications: function clearNotifications(selectorToRender) {\n    var selector = selectorToRender || \"div#summary\";\n    $(selector).html('');\n    $('button').button('reset');\n  },\n  //Clear all error on page \n  clearErrors: function clearErrors(selectorToRender) {\n    var selector = selectorToRender || \"div.notifications div.alert-danger\";\n    $(selector).remove();\n    $('button').button('reset');\n  }\n};\nmodule.exports = backboneNotification;\n//How to require it:\n//window.Backbone.Notification = require('lib/backbone_notification');","# Exception class\nclass CustomException\n  constructor:(@name, @message,@options)->\n  log:->\n    console.log(\"name\", @name, \"message\", @message, \"options\", @options)\n# Exception for a not implemented method.\nclass NotImplementedException extends CustomException\n  constructor:(message, options)->\n    super(\"NotImplementedException\", message, options)\n# Exception class for an argument null exeption.\nclass ArgumentNullException extends CustomException\n  constructor:(message)->\n    super(\"ArgumentNull\", message)\n# Exception for a invalid argument exeption\nclass ArgumentInvalidException extends CustomException\n  constructor:(message, options)->\n    super(\"ArgumentInvalidException\", message, options)\nclass DependencyException extends CustomException\n  constructor:(message)->\n    super(\"DependencyException\", message)\nmodule.exports=\n\tCustomException: CustomException\n\tNotImplementedException: NotImplementedException\n\tArgumentNullException: ArgumentNullException\n\tArgumentInvalidException: ArgumentInvalidException","module.exports = {\n\t\"virtualMachine\": {\n\t\t\"name\": {\n\t\t\t\"domain\": \"DO_TEXTE_50\",\n\t\t\t\"required\": true\n\t\t},\n\t\t\"nbCpu\": {\n\t\t\t\"domain\": \"DO_ENTIER\",\n\t\t\t\"required\": true\n\t\t},\n\t\t\"osId\": {\n\t\t\t\"domain\": \"DO_ID\",\n\t\t\t\"required\": true\n\t\t},\n\t\t\"memory\": {\n\t\t\t\"domain\": \"DO_ENTIER\",\n\t\t\t\"required\": true\n\t\t},\n\t\t\"diskCapacity\": {\n\t\t\t\"domain\": \"DO_ENTIER\",\n\t\t\t\"required\": true\n\t\t},\n\t\t\"users\": {\n\t\t\t\"domain\": \"DO_LISTE\",\n\t\t\t\"required\": true\n\t\t},\n\t\t\"startDate\": {\n\t\t\t\"domain\": \"DO_DATE\",\n\t\t\t\"required\": true\n\t\t},\n\t\t\"endDate\": {\n\t\t\t\"domain\": \"DO_DATE\"\n\t\t}\n\t},\n\t\"virtualMachineSearch\": {\n\t\t\"name\": {\n\t\t\t\"domain\": \"DO_TEXTE_30\",\n\t\t\t\"required\": true\n\t\t}\n\t},\n\t\"reference\": {\n\t\t\"id\": {\n\t\t\t\"domain\": \"DO_ID\",\n\t\t\t\"required\": true\n\t\t},\n\t\t\"name\": {\n\t\t\t\"domain\": \"DO_TEXTE_30\",\n\t\t\t\"required\": true\n\t\t},\n\t\t\"translationKey\": {\n\t\t\t\"domain\": \"DO_TEXTE_30\",\n\t\t\t\"required\": true\n\t\t}\n\t},\n\t\"nantissement\": {\n\t\t\"critereRecherchePret\": {\n\t\t\t\"isTopListeRouge\": {\n\t\t\t    \"domain\": \"DO_BOOLEEN\"\n                \n\t\t\t},\n\t\t\t\"isTopConvention\": {\n\t\t\t\t\"domain\": \"DO_BOOLEEN\"\n\t\t\t},\n\t\t\t\"isNanti\": {\n\t\t\t\t\"domain\": \"DO_BOOLEEN\"\n\t\t\t},\n\t\t\t\"identificationUESLPret\": {\n\t\t\t\t\"domain\": \"DO_TEXTE_30\"\n\t\t\t},\n\t\t\t\"identificationCILPret\": {\n\t\t\t\t\"domain\": \"DO_TEXTE_30\"\n\t\t\t},\n\t\t\t\"montantNominalMin\": {\n\t\t\t\t\"domain\": \"DO_DEVISE\"\n\t\t\t},\n\t\t\t\"montantNominalMax\": {\n\t\t\t\t\"domain\": \"DO_DEVISE\"\n\t\t\t},\n\t\t\t\"dateContratMin\":{\n\t\t\t\t\"domain\": \"DO_DATE\"\n\t\t\t},\n\t\t\t\"dateContratMax\":{\n\t\t\t\t\"domain\": \"DO_DATE\"\n\t\t\t},\n\t\t\t\"dateDerniereEcheanceMin\":{\n\t\t\t\t\"domain\": \"DO_DATE\"\n\t\t\t},\n\t\t\t\"dateDerniereEcheanceMax\":{\n\t\t\t\t\"domain\": \"DO_DATE\"\n\t\t\t}\n\t\t}\n\t}\n\n};","module.exports = {\n\t\"DO_ENTIER\": {\n\t\t\"type\": \"number\",\n\t\t\"validation\": [{\n\t\t\t\"type\": \"number\"\n\t\t}],\n\t},\n\t\"DO_DATE\": {\n\t\t\"type\": \"date\"\n\t},\n\t\"DO_TEXTE_50\": {\n\t\t\"type\": \"text\",\n\t\t\"validation\": [{\n\t\t\t\"type\": \"string\",\n\t\t\t\"options\": {\n\t\t\t\t\"maxLength\": 50\n\t\t\t}\n\t\t}],\n\t\t\"style\": [cssClassDomain1, cssClassDomain2]\n\t},\n\t\"DO_LISTE\": {\n\t\t\"type\": \"number\",\n\t},\n\t\"DO_ID\": {\n\t\t\"type\": \"text\"\n\t},\n\t\"DO_TEXTE_30\": {\n\t\t\"type\": \"text\",\n\t\t\"validation\": [{\n\t\t\t\"type\": \"string\",\n\t\t\t\"options\": {\n\t\t\t\t\"maxLength\": 30\n\t\t\t}\n\t\t}]\n\t},\n\t\"DO_EMAIL\": {\n\t\t\"type\": \"email\",\n\t\t\"validation\": [{\n\t\t\t\"type\": \"email\"\n\t\t}, {\n\t\t\t\"type\": \"string\",\n\t\t\t\"options\": {\n\t\t\t\t\"minLength\": 4\n\t\t\t}\n\t\t}]\n\t},\n\t\"DO_BOOLEEN\":{\n\t\t\"type\": \"boolean\"\n\t},\n\t\"DO_DEVISE\":{\n\t\t\"type\": \"number\",\n\t\t\"validation\":{\n\t\t\t\"type\": \"number\",\n\t\t\t\"options\":{\"min\": 0}\n\t\t},\n\t\t\"formatter\": \"devise\"\n\t}\n\n};","/*global _*/\nvar BackboneNotification = require('./backbone_notification');\n// transform errors send by API to application errors.\nfunction manageResponseErrors(response, options) {\n\toptions = options || {};\n\tvar responseErrors = response.responseJSON;\n\t/**/\n\tvar globalErrors = [];\n\tvar fieldErrors = {};\n\tif (responseErrors !== undefined && responseErrors !== null) {\n\t\t/*Case of an HTTP Error (as an example 404).*/\n\t\tif (responseErrors.error !== undefined && responseErrors !== null) {\n\t\t\t//The response json should have the following structure : {statusCode: 404, error: \"Not Found\"}\n\t\t\tglobalErrors.push( '' + responseErrors.statusCode + ' ' + responseErrors.error);\n\t\t} else if (responseErrors.errors !== undefined) {\n\t\t\t// there errors in the response\n\t\t\t_.each(responseErrors.errors, function(error) {\n\t\t\t\tif (error.fieldName !== undefined && error.fieldName.length > 0) {\n\t\t\t\t\tfieldErrors[error.fieldName] = error.message;\n\t\t\t\t} else {\n\t\t\t\t\tglobalErrors.push(error.message);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t//If there is no errors, do nothing.\n\tif ((_.isEmpty(fieldErrors) && _.isEmpty(globalErrors))) {\n\t\treturn null;\n\t} else {\n\t\tvar errors = {\n\t\t\tfieldErrors: fieldErrors,\n\t\t\tglobalErrors: globalErrors\n\t\t};\n\t\t//If the display options is passed in argument, we display the options.\n\t\tif (options.isDisplay || options.model) {\n\t\t\tdisplayErrors(errors);\n\t\t}\n\t\tif (options.model) {\n\t\t\tsetModelErrors(options.model, errors);\n\t\t}\n\t\treturn errors;\n\t}\n}\n\n//Display errors which are defined into the errors.global\nfunction displayErrors(errors) {\n\tif (errors !== undefined && errors.globalErrors !== undefined) {\n\t\tvar errorsGlobal = [];\n\t\terrors.globalErrors.forEach(function convertErrorsIntoNotification(element) {\n\t\t\terrorsGlobal.push({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: element,\n\t\t\t\tcreationDate: Date.now()\n\t\t\t});\n\t\t});\n\t\tBackboneNotification.addNotification(errorsGlobal, true);\n\t}\n}\n\n//Set the *model* errors in the fieldErrors.\nfunction setModelErrors(model, errors) {\n\tif (errors !== undefined && errors.fieldErrors !== undefined) {\n\t\tmodel.set({\n\t\t\t'errors': errors.fieldErrors\n\t\t});\n\t}\n}\nmodule.exports = {\n\tmanageResponseErrors: manageResponseErrors,\n\tdisplay: displayErrors,\n\tsetModelErrors: setModelErrors\n};","// #Module de Helper pour l'ensemble des formulaires.\n// formModelBinder permet de convertir l'ensemble des éléments d'un formulaire en model en fonction de leur attribut data-name.\n// inputs must be a selector with inputs inside and model a BackBone model.\nvar _formModelBinder = function formModelBinder(data, model, options) {\n  options = options || {};\n  options.isSilent = options.isSilent || true;\n  if (data.inputs !== null && data.inputs !== undefined) {\n    this.formInputModelBinder(data.inputs, model);\n  }\n  if (data.options !== null && data.options !== undefined) {\n    this.formOptionModelBinder(data.options, model);\n  }\n};\n\n// inputs must be a selector with option:selected inside and model a BackBone model.\nvar _formInputModelBinder = function formInputModelBinder(inputs, model, options) {\n  options = options || {};\n  options.isSilent = options.isSilent || true;\n  //parameters checkings\n  if (typeof inputs === \"undefined\" || inputs === null) {\n    throw (\"inputs are not defined\");\n  }\n  if (typeof model === \"undefined\" || model === null) {\n    throw (\"the model is not defined\");\n  }\n  var modelContainer = {};\n  inputs.each(function() {\n    var input = this;\n    //console.log('input', input);\n    var currentvalue;\n    //we switch on all html5 values\n    switch (input.getAttribute('type')) {\n      case \"checkbox\":\n        currentvalue = input.checked;\n        break;\n      case \"number\":\n        currentvalue = +input.value;\n        break;\n      default:\n        currentvalue = input.value;\n    }\n    modelContainer[this.getAttribute('data-name')] = currentvalue;\n  });\n  model.set(modelContainer, {\n    silent: options.isSilent\n  });\n};\n\n// formOptionModelBinder permet de convertir l'ensemble des options set d'un formulaire en model en fonction de leur attribut data-name.\n// options must be a option:select and model a BackBone model.\nvar _formOptionModelBinder = function formOptionModelBinder(optionsSets, model, options) {\n  options = options || {};\n  options.isSilent = options.isSilent || true;\n  //parameters checkings\n  if (typeof optionsSets === \"undefined\" || optionsSets === null) {\n    throw (\"options are not defined\");\n  }\n  if (typeof model === \"undefined\" || model === null) {\n    throw (\"the model is not defined\");\n  }\n\n  var selectedValue, modelContainer = {};\n  //For each option we take the value selected. We had this value to the model, only if the user doesn't choose the empty string.\n  optionsSets.each(function() {\n    var attributeName = this.getAttribute('data-name');\n    selectedValue = this.value;\n    modelContainer[attributeName] = selectedValue === \"undefined\" ? undefined : selectedValue;\n  });\n\n  model.set(modelContainer, {\n    silent: options.isSilent\n  });\n};\n\n//#Generate a form from a model.\nvar _modelFormGenerator = function modelFormGenerator() {\n\n};\n\nmodule.exports = {\n  formModelBinder: _formModelBinder,\n  formInputModelBinder: _formInputModelBinder,\n  formOptionModelBinder: _formOptionModelBinder,\n  modelFormGenerator: _modelFormGenerator\n};","module.exports = {\n  //Process all the data from the header.\n  process: function processHeader(headersElements) {\n    var headerData = [];\n    for (var i = 0, l = headersElements.length; i < l; i++) {\n      var active = i === 0 ? \"active\" : \"\";\n      var name = headersElements[i].name;\n      var jsonElement = {\n        cssId: \"nav-\" + name,\n        active: active,\n        name: name,\n        transalationKey: \"header.\" + name\n      };\n      if(headersElements[i].url !== undefined){\n        jsonElement.url = headersElements[i].url;\n      }\n      headerData.push(jsonElement);\n    }\n    return headerData;\n  }\n};","\n# Exceptions\nArgumentNullException = require(\"./custom_exception\").ArgumentNullException\n# Proxy in order to have \nproxyValidationContainer = {}\n\n# Get the domains definition.\ndomains = require('./domains')\n# Get the validation attributes from the domain.\ngetDomainsValidationAttrs = (model)->\n  #console.log('called')\n  return new ArgumentNullException('The model should exists and have a metadatas property.') if not model?\n  #Get the metadatas from the model.\n  metadatas = model.metadatas\n  throw new ArgumentNullException('The model should have metadatas.') if (not metadatas?) #or (not tryConstructModelMetaDatasFromModelName(model)?)\n  if (not metadatas?)\n    metadatas = constructModelMetaDatas()\n  #Container for the validation rules of the domain of each property.\n  valDomAttrs = {}\n  # Lopping through all attributes of th model in order to build their validators.\n  for attr of metadatas \n    # Construct the metadata object\n    metadata = {}\n    md = metadatas[attr] or {}\n    if (md.isValidationOff? and md.isValidationOff is false) or (not md.isValidationOff?)\n     _.extend(metadata, md.metadata) if md.metadata?\n     (metadata.domain = md.domain) if md.domain?\n     (metadata.required = md.required) if md.required?\n    \n     #Container for the validators.\n     validators = [];\n     #If the required filed is set, add a validator\n     validators.push({\"type\": \"required\",\"value\": true}) if metadata.required\n     # Extend the validators \n     (validators = _.union(validators, domains[metadata.domain].validation)) if metadata.domain? and domains[metadata.domain]?\n     # Set the validators inide the container associated with the field.\n     valDomAttrs[attr] = validators;\n  return valDomAttrs\n\nproxyDomainValidationAttrs = (model)->\n  return getDomainsValidationAttrs(model)\n  return proxyValidationContainer[model.modelName] if(model.modelName? and proxyValidationContainer[model.modelName]?)\n  if model.modelName?\n    return proxyValidationContainer[model.modelName] = getDomainsValidationAttrs(model)\n  else\n    return getDomainsValidationAttrs(model)\nmodule.exports =\n  getDomainsValidationAttrs: getDomainsValidationAttrs\n  domainAttributes: proxyDomainValidationAttrs\n","/*global Promise, _*/\nvar ArgumentNullException = require(\"./custom_exception\").ArgumentNullException;\nvar metadataBuilder = require('./metadata_builder');\nvar validators = require('./validators');\nexports.validate = function(model) {\n  var errors = {};\n  //Looping through each attributes.\n  validateDomainAttributes(model, errors);\n  validateCustomAttributes(model, errors);\n  //Promisify the validations , if there is errors call the reject else call resolve with the model.\n  return new Promise(function promiseValidation(resolve, reject) {\n    //console.log(\"Errors\", errors);\n    if (_.isEmpty(errors)) {\n      //console.log('resolve');\n      resolve(model);\n    } else {\n      //console.log('reject');\n      reject(errors);\n    }\n    return undefined;\n  });\n};\n\n//Validate the model customs attributes.\nvar validateCustomAttributes = function validateCustomAttributes(model, errors) {\n  if (!model) {\n    throw new ArgumentNullException('The model should exist');\n  }\n  for (var attr in getValidatedAttrs(model)) {\n    //console.log(\"Attr\", attr);\n    if (!model.isValid(attr)) {\n      var domainMessage = errors[attr] !== null && errors[attr] !== undefined ? errors[attr] : '';\n      errors[attr] = '' + domainMessage +''+  attr + \" not valid.\"; // Todo: translate the message.\n    }\n  }\n};\n\n//Get the validation \"standard\" attributes.\nvar getValidatedAttrs = function(model) {\n  return _.reduce(_.keys(_.result(model, 'validation') || {}), function(memo, key) {\n    memo[key] = void 0;\n    return memo;\n  }, {});\n};\n\n//Validate the validation domains attributes.\nvar validateDomainAttributes = function validateDomainAttributes(model, errors) {\n  var validatorsOfDomain = metadataBuilder.domainAttributes(model);\n  //console.log(\"validators %j\", validatorsOfDomain);\n  for (var attr in validatorsOfDomain) {\n    //Validate the model only of there is the attribute on the model.\n    var valRes = validators.validate({\n      name: attr,\n      value: model.get(attr)\n    }, validatorsOfDomain[attr]);\n    //If there is no error dont set any errors. \n    if (valRes.errors !== undefined && valRes.errors.length > 0) {\n      errors[attr] = valRes.errors.join(',');\n    }\n  }\n};","/*global _, $*/\n\n// type of the request for odata\nvar paginator_core = {\n    // the type of the request (GET by default)\n    type: 'GET',\n\n    // the type of reply (json by default)\n    dataType: 'json',\n};\n\nfunction createOdataOptions(criteria, pagesInfo, options) {\n    return compileOptions(criteria, pagesInfo, options);\n}\n\n// convert JSON criteria to odata\nfunction criteriaToOdata(criteria) {\n    var result = \"\";\n    for (property in criteria) {\n        if (criteria[property] !== undefined && criteria[property] !== null && criteria[property].length > 0) {\n            result += property + \" eq \" + criteria[property] + \",\";\n        }\n    }\n    return result.substring(0, result.length - 1);\n}\n\n//generate orderBy parameters fo odata\nfunction orderToOdata(sortFields) {\n    var orderBy = \"\";\n    sortFields.forEach(function (sortField) {\n        orderBy += sortField.field + \" \" + sortField.order + \",\";\n    });\n    return orderBy.substring(0, orderBy.length - 1);\n}\n\n//generate parameter for odata server API\nfunction generateServerApi(criteria, pagesInfo) {\n    var sortFields = [];\n    if (pagesInfo.sortField) {\n        sortFields.push(pagesInfo.sortField);\n    }\n    return {\n        // the query field in the request\n        '$filter': criteriaToOdata(criteria),\n        // number of items to return per request/page\n        '$top': pagesInfo.perPage,\n        //records to bypass\n        '$skip': pagesInfo.currentPage * pagesInfo.perPage,\n        // field to sort by\n        '$orderby': orderToOdata(sortFields),\n        // what format would you like to request results in?\n        '$format': 'json',\n        // custom parameters\n        '$inlinecount': 'allpages',\n        //callback odata\n        //'$callback': 'callback'\n    };\n}\n\n//generate options fo an odata request \nfunction compileOptions(criteria, pagesInfo, options) {\n    var self = pagesInfo;\n    options = options || {};\n\n    var server_api = generateServerApi(criteria, pagesInfo);\n    // Some values could be functions, let's make sure\n    // to change their scope too and run them\n    var queryAttributes = {};\n    _.each(server_api, function (value, key) {\n        if (_.isFunction(value)) {\n            value = _.bind(value, self);\n            value = value();\n        }\n        if (value !== undefined && value !== null && value.toString().length > 0) {\n            queryAttributes[key] = value;\n        }\n    });\n\n    var queryOptions = _.clone(paginator_core);\n    _.each(queryOptions, function (value, key) {\n        if (_.isFunction(value)) {\n            value = _.bind(value, self);\n            value = value();\n        }\n        queryOptions[key] = value;\n    });\n\n    // Create default values if no others are specified\n    queryOptions = _.defaults(queryOptions, {\n        timeout: 25000,\n        cache: false,\n        type: 'GET',\n        dataType: 'json'\n    });\n\n    // Allows the passing in of {data: {foo: 'bar'}} at request time to overwrite server_api defaults\n    if (options.data) {\n        options.data = decodeURIComponent($.param(_.extend(queryAttributes, options.data)));\n    } else {\n        options.data = decodeURIComponent($.param(queryAttributes));\n    }\n\n    queryOptions = _.extend(queryOptions, {\n        data: decodeURIComponent($.param(queryAttributes)),\n        processData: false,\n        //url: _.result(queryOptions, 'url')\n    }, options);\n\n    return queryOptions;\n}\n\n// parse odata response and return values in format : {totalRecords:totalRecords, values: values}\nfunction parseOdataResponse(response) {\n    if (response === undefined || response === null || response[\"odata.count\"] === undefined || response[\"odata.count\"] === null) {\n        throw new Error('Odata error : parsing result');\n    }\n    return {\n        totalRecords: response[\"odata.count\"],\n        values: response.value\n    };\n}\n\nmodule.exports = {\n    createOdataOptions: createOdataOptions,\n    parseOdataResponse: parseOdataResponse\n};","/*global Backbone, Promise, _*/\n// Backbone model with **promise** CRUD method instead of its own methods.\nvar PromiseModel = Backbone.Model.extend({\n\t//Ovverride the save method on the model in order to Return a promise.\n\tsave: function saveModel() {\n\t\tvar model = this;\n\t\tvar method = this.isNew() ? 'create' : 'update';\n\t\treturn new Promise(\n\t\t\tfunction(resolve, reject) {\n\t\t\t\tBackbone.sync(method, model, {\n\t\t\t\t\tsuccess: resolve,\n\t\t\t\t\terror: reject\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t},\n\t//Replacing the classic destroy model with a promise.\n\tdestroy: function promiseDestroyModel() {\n\t\tvar model = this;\n\t\treturn new Promise(\n\t\t\tfunction(resolve, reject) {\n\t\t\t\tBackbone.sync('delete', model, {\n\t\t\t\t\tsuccess: resolve,\n\t\t\t\t\terror: reject\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t},\n\t//Replacing the classic backbone fetch with a promise, resolve and reject are givent as options.success, and options.error of the ajax.\n\tfetch: function promiseFetchModel(options) {\n\t\toptions = options || {};\n\t\tvar model = this;\n\t\tconsole.log('promiseFetchModel', model);\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\t/*Don't use underscore but could have because bacckbone has a dependency on it.*/\n\t\t\toptions.success = resolve;\n\t\t\toptions.error = reject;\n\t\t\tBackbone.sync('read', model, options);\n\t\t});\n\t}\n\n});\n\n// Backbone collection with **promise** CRUD method instead of its own methods.\nvar PromiseCollection = Backbone.Collection.extend({\n\t//Override the default collection fetch method, using and returning a promise.\n\t//Options is the options object which is sent to the jquery method.\n\tfetch: function promiseFetchCollection(options) {\n\t\toptions = options || {};\n\t\tvar collection = this;\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\t/*Don't use underscore but could have because bacckbone has a dependency on it.*/\n\t\t\toptions.success = resolve;\n\t\t\toptions.error = reject;\n\t\t\tBackbone.sync('read', collection, options);\n\t\t});\n\t}\n});\n\n//Convert an existing Backbone model to a _promise_ version of it.\nvar ConvertModel = function ConvertBackBoneModelToPromiseModel(model) {\n\tif (model.url === undefined || model.urlRoot === undefined) {\n\t\tthrow new Error(\"ConvertBackBoneModelToPromiseModel: The model url cannot be undefined.\");\n\t}\n\tvar fields = {};\n\tif(model.has('id')){\n\t\t_.extend(fields, model.pick('id'));\n\t}\n\tvar promiseModel = new PromiseModel(fields);\n\tvar property = model.urlRoot !== undefined ? 'urlRoot' : 'url';\n\tpromiseModel[property] = model[property];\n\treturn promiseModel;\n};\n\n//Convert an existing Backbone collection to a _promise_ version of it.\nvar ConvertCollection = function ConvertBackboneCollectionToPromiseCollection(collection) {\n\tif (collection.url === undefined || collection.urlRoot === null) {\n\t\tthrow new Error(\"The collection url cannot be undefined.\");\n\t}\n\tvar promiseCollection = new PromiseCollection();\n\tpromiseCollection.url = collection.url;\n\treturn promiseCollection;\n};\n\nmodule.exports = {\n\tModel: PromiseModel,\n\tCollection: PromiseCollection,\n\tConvert: {\n\t\tModel: ConvertModel,\n\t\tCollection: ConvertCollection\n\t}\n};","/*global Promise, $*/\n// Container for all the references lists.\nvar references = {};\n\n\n// Load a reference with its list name.\nfunction loadListByName(listDesc) {\n  return new Promise(function promiseLoadList(resolve, reject) {\n    //console.log(\"Errors\", errors);\n    if (references[listDesc.name] !== undefined) {\n      resolve(references[listDesc.name]);\n    } else {\n      $.ajax({\n        url: listDesc.url,\n        type: \"GET\",\n        dataType: \"json\",\n        crossDomain: true,\n        success: function(data) {\n          references[listDesc.name] = data;//In order to not reload the next time,  warning, as promises are asynchronous, when the promise is define, this could be false.\n          resolve(data);\n        },\n        error: function(error) {\n          reject(error);\n        }\n      });\n    }\n  });\n}\n\n// Return an array of many promises for all the given lists.\nfunction loadMany(names){\n  var promises = [];\n  names.forEach(function(name){\n    promises.push(loadListByName(name));\n  });\n  return promises;\n}\n\n\nmodule.exports = {\n  loadListByName: loadListByName,\n  loadMany: loadMany\n};","application = require 'application'\nFooterView = require 'views/footer-view'\nHomeView = require 'views/home-view'\nAboutView = require 'views/about-view'\nContactView = require 'views/contact-view'\nSigninView = require 'views/signin-view'\nVirtualMachineSearch = require 'models/virtualMachineSearch' \nVirtualMachineSearchView = require 'views/virtualMachine-search-view'\nVirtualMachineSearchTemplateView = require 'views/search-template-view'\nVirtualMachine = require 'models/virtualMachine'\nVirtualMachineView = require 'views/virtualMachine-view'\nVirtualMachineTemplateView = require 'views/detail-consult-template-view'\nVirtualMachineSaveView = require 'views/virtualMachine-save-view'\nVirtualMachineSaveTemplateView = require 'views/detail-edit-template-view'\nReferences = require('../models/references')\nReferencesView = require('../views/references-view')\nPret = require('../models/nantissement/pret')\nPretSearchView = require('../views/nantissement/pret-search-view')\n\nmodule.exports = class Router extends Backbone.Router\n\n\troutes:\n    '': 'home'\n    'about': 'about'\n    'contact': 'contact'\n    'signin': 'signin'\n    'virtualMachine/search': 'searchVirtualMachine'\n    'virtualMachine/create': 'newVirtualMachine' \n    'virtualMachine/:id': 'virtualMachine'\n    'virtualMachine/edit/:id': 'updateVirtualMachine'\n    'reference': 'reference'\n    'test/:modelName/search': 'search'\n    'test/:modelName/create': 'create'\n    'test/:modelName/:id': 'list' \n    'test/:modelName/show/:id': 'show'\n    'test/:modelName/edit/:id': 'edit'\n    'nantissement/pret/search': 'searchPret'\n  # Nantissement\n  searchPret: =>\n    application.layout.setActiveMenu('nantissement')\n    application.layout.content.show(new PretSearchView({model: new Pret()}))\n  \n  home: =>\n    view = new HomeView()\n    application.layout.setActiveMenu('refinancement')\n    application.layout.content.show(view)\n    application.layout.footer.show(\n      new FooterView\n        model: new Backbone.Model\n          name: 'home'\n          time: moment().format('MMMM Do YYYY, h:mm:ss a')\n      )\n\n  about: =>\n    view = new AboutView()\n    application.layout.content.show(view)\n    application.layout.footer.show(\n      new FooterView\n        model: new Backbone.Model\n          name: 'about'\n          time: moment().format('MMMM Do YYYY, h:mm:ss a')\n    )\n\n  contact: =>\n    view = new ContactView()\n    application.layout.content.show(view)\n    application.layout.footer.show(\n      new FooterView\n        model: new Backbone.Model\n          name: 'contact'\n          time: moment().format('MMMM Do YYYY, h:mm:ss a')\n      )\n\n  signin: =>\n    view = new SigninView()\n    application.layout.content.show(view)\n    application.layout.footer.show(\n      new FooterView\n        model: new Backbone.Model\n          name: 'signin'\n          time: moment().format('MMMM Do YYYY, h:mm:ss a')\n      )\n\n  searchVirtualMachine: =>\n    model = new VirtualMachineSearch()\n    view = new VirtualMachineSearchTemplateView({model: model})\n    #view = new VirtualMachineSearchView({model: model})\n    application.layout.content.show(view)\n\n  virtualMachine: (id) =>\n    model = new VirtualMachine({id: id})\n    #view = new VirtualMachineView({model: model})\n    view = new VirtualMachineTemplateView({model: model})\n    application.layout.content.show(view)\n\n  newVirtualMachine:() =>\n    model = new VirtualMachine({isEdit: true, isCreate: true})\n    #view = new VirtualMachineSaveView({model: model})\n    view = new VirtualMachineSaveTemplateView({model: model})\n    application.layout.content.show(view)\n\n  updateVirtualMachine:(id) =>\n    model = new VirtualMachine({id: id, isEdit: true})\n    #view = new VirtualMachineSaveView({model: model})\n    view = new VirtualMachineSaveTemplateView({model: model})\n    application.layout.content.show(view)\n\n  reference: ()=>\n    model = new References()\n    view = new ReferencesView({model: model})\n    application.layout.content.show(view)\n  search: (modelName)=>\n    ###Model = require(\"../models/#{modelName}\")\n    #View = #require(\"../models/#{modelName}-search\")\n    model = new Model()\n    view =  new VirtualMachineSearchTemplateView({model: model}) \n    #view = new VirtualMachineSearchView({model: model})\n    application.layout.content.show(view)###\n    console.log \"search\", modelName\n  create: (modelName)=>\n    console.log \"create\", modelName\n  list: (modelName, id)=>\n    console.log \"list\", modelName\n  show: (modelName, id)=>\n    console.log \"show\", modelName\n  edit:(modelName, id)=>\n    console.log \"edit\", modelName","module.exports = {\n  header: [{\n    name: \"accueil\",\n\n    subHeader: {}\n  }, {\n    name: \"nantissement\",\n    url:\"#nantissement/pret/search\",\n    subHeader: [\n    ]\n  }, {\n    name: \"refinancement\",\n    subHeader: {}\n  }, {\n    name: \"paiementEcheance\",\n    subHeader: {}\n  }, {\n    name: \"reporting\",\n    subHeader:{}\n  }, {\n    name: \"administration\",\n    subHeader:{}\n  }]\n};","/* global $, _ \n*/\n//*This helper has a dependency on underscore and jQuery.*/\nvar urlHelper = {};\n// Generate an url with all the parameters\nurlHelper.generateUrl = function generateUrl(route, params) {\n\tvar url = '',\n\t\tSEP = '/',\n\t\tPARAM = '?',\n\t\tET = '&';\n\tfor (var i = 0, routeLength = route.length; i < routeLength; i++) {\n\t\turl += (route[i] + SEP);\n\t}\n\tif (typeof params !== \"undefined\" && params !== null && !_.isEmpty(params)) {\n\t\turl += PARAM;\n\t\tfor (var propt in params) {\n\t\t\turl += (propt + '=' + params[propt] + ET);\n\t\t}\n\t}\n\treturn url.slice(0, -1); //Remove the last ET.\n};\n\n//Parse the parameters of the url.\nurlHelper.parseParam = function parseParam(params) {\n\tvar result = {};\n\tvar paramsLength = params.length;\n\t//If the string params are not in the chain wich starts with a ?\n\tif (paramsLength === 0 || '?' !== params[0]) {\n\t\tthrow \"parseParam : the params is not well formated : \" + params;\n\t}\n\tvar namedParams = params.slice(1).split('&');\n\t//For each name param (param=value) we put it in an object, we get pack the parameter we have given in the url.\n\t$.each(namedParams, function(index, value) {\n\t\tif (value) {\n\t\t\t/**/\n\t\t\tvar param = value.split('=');\n\t\t\tif (param[1] === 'true') {\n\t\t\t\tparam[1] = true;\n\t\t\t} else if (param[1] === 'false') {\n\t\t\t\tparam[1] = false;\n\t\t\t}\n\t\t\tresult[param[0]] = param[1];\n\t\t}\n\t});\n\treturn result;\n};\n\nmodule.exports = urlHelper;","/*global i18n*/\nvar DependencyException = require('./custom_exception').DependencyException;\nvar regex = {\n\temail: /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n\tnumber: /^-?\\d+(?:\\.d*)?(?:e[+\\-]?\\d+)?$/i\n};\n\n//Function to test an email.\nfunction emailValidation(emailToValidate, options) {\n\toptions = options || options;\n\treturn regex.email.test(emailToValidate);\n}\n\n//Function to test the length of a string.\nfunction stringLength(stringToTest, options) {\n\tif ('string' !== typeof stringToTest) {\n\t\treturn false;\n\t}\n\toptions = options || {};\n\t//console.log(options);\n\tvar isMinLength = options.minLength ? stringToTest.length > options.minLength : true;\n\tvar isMaxLength = options.maxLength ? stringToTest.length < options.maxLength : true;\n\treturn isMinLength && isMaxLength;\n}\n//Function to  validate that an input is a number.\nfunction numberValidation(numberToValidate, options) {\n\toptions = options || options;\n\tnumberToValidate = '' + numberToValidate; //Cast it into a number.\n\treturn regex.number.test(numberToValidate);\n}\n\n//Validate a property, a property shoul be as follow: `{name: \"field_name\",value: \"field_value\", validators: [{...}] }`\nvar validate = function(property, validators) {\n\t//console.log(\"validate\", property, validators);\n\tvar errors, res, validator, _i, _len;\n\terrors = [];\n\tif (validators) {\n\t\tfor (_i = 0, _len = validators.length; _i < _len; _i++) {\n\t\t\tvalidator = validators[_i];\n\t\t\tres = validateProperty(property, validator);\n\t\t\tif (res != null) {\n\t\t\t\terrors.push(res);\n\t\t\t}\n\t\t}\n\t}\n\treturn {\n\t\tname: property.name,\n\t\tvalue: property.value,\n\t\tisValid: errors.length === 0,\n\t\terrors: errors\n\t};\n};\n\nvar validateProperty = function(property, validator) {\n\tvar isValid;\n\tif (validator == null) {\n\t\treturn void 0;\n\t}\n\tif (property == null) {\n\t\treturn void 0;\n\t}\n\tisValid = (function() {\n\t\tswitch (validator.type) {\n\t\t\tcase \"required\":\n\t\t\t\tvar prevalidString = property.value === \"\" ? false : true;\n\t\t\t\tvar prevalidDate = true;\n\t\t\t\treturn validator.value === true ? (property.value != null && prevalidString && prevalidDate) : true;\n\t\t\tcase \"regex\":\n\t\t\t\treturn validator.value.test(property.value);\n\t\t\tcase \"email\":\n\t\t\t\treturn emailValidation(property.value, validator.options);\n\t\t\tcase \"number\":\n\t\t\t\treturn numberValidation(property.value, validator.options);\n\t\t\tcase \"string\":\n\t\t\t\treturn stringLength(property.value, validator.options);\n\t\t\tcase \"function\":\n\t\t\t\treturn validator.value(property.value, validator.options);\n\t\t\tdefault:\n\t\t\t\treturn void 0;\n\t\t}\n\t})();\n\tif(isValid === undefined || isValid === null){\n\t\tconsole.warn('The validator of type: ' + validator.type + ' is not defined');//Todo: call the logger.\n\t}\n\telse if (isValid === false) {\n\n\t\t//Add the name of the property.\n\t\treturn getErrorLalel(validator.type, property.name ,validator.options);//\"The property \" + property.name + \" is invalid.\";\n\t}\n};\n\nfunction getErrorLalel(type, fieldName, options) {\n\toptions = options || {};\n\tif(!i18n){throw new DependencyException(\"Dependency not resolved: i18n.js\");}\n\tvar translationKey = options.translationKey ? options.translationKey : \"domain.validation.\"+ type;\n\treturn i18n.translate(translationKey, {fieldName: fieldName, options : options});\n\t/*var message = (function() {\n\t\tswitch (type) {\n\t\t\tcase \"required\":\n\t\t\t\treturn i18n.translate();\n\t\t\tcase \"regex\":\n\t\t\t\treturn validator.value.test(property.value);\n\t\t\tcase \"email\":\n\t\t\t\treturn emailValidation(property.value, validator.options);\n\t\t\tcase \"number\":\n\t\t\t\treturn numberValidation(property.value, validator.options);\n\t\t\tcase \"string\":\n\t\t\t\treturn stringLength(property.value, validator.options);\n\t\t\tcase \"function\":\n\t\t\t\treturn validator.value(property.value, validator.options);\n\t\t\tdefault:\n\t\t\t\treturn void 0;\n\t\t}\n\t})();*/\n}\n\n// Validations functions.\nmodule.exports = {\n\temail: emailValidation,\n\tstringLength: stringLength,\n\tnumber: numberValidation,\n\tvalidate: validate\n};","# Put your handlebars.js helpers here.\n# Globals variables.\n# Get the domains definition as globals.\ndomains_definition = require('./domains')\n\nHandlebars.registerHelper 'pick', (val, options) ->\n\treturn options.hash[val]\n\n#use in order to use the translation system in the view.\nHandlebars.registerHelper \"t\", (i18n_key, options) ->\n  opt = options.hash or {}\n  maxLength = opt.max\n  result = i18n.t(i18n_key)\n  if maxLength? and maxLength < result.length then result = \"#{result.slice(0,+maxLength)}...\"\n  new Handlebars.SafeString(result)\n\n#Display the value of an element.\nHandlebars.registerHelper \"display_for\", (property, options) ->\n  opt = options.hash or {}\n  maxLength = opt.max\n  if this[property]? then result = this[property] else return \"\"\n  #console.log 'displayFor', this, 'result ', result, 'max', maxLength\n  \n  #Reduce a string only if it exceed the max. And add .... .\n  reduce = (s, max)->\n    if s.length > max then \"#{s.slice(0,+maxLength)}... \" else \"#{s} \"\n  if maxLength? and result?\n    str = \"\"\n    str += reduce(res, maxLength) for res in result.split(' ')\n    return new Handlebars.SafeString(str)\n  return new Handlebars.SafeString(result)\n\n\n#use in order to debug a template.\nHandlebars.registerHelper \"debug\", (optionalValue) ->\n  console.log \"Current Context\"\n  console.log \"====================\"\n  console.log this\n  if optionalValue\n    console.log \"Value\"\n    console.log \"====================\"\n    console.log optionalValue\n# Get the metadatad for a property.\ngetMetadataFor = (property, context)->\n  metadata = {}\n  if context?\n    if context['metadatas']?\n      md = context['metadatas'][property]\n    if not md? and domains_definition?\n      domainOfModel = domains_definition[context['modelName']];\n      if domainOfModel?\n        md = {metadata : domainOfModel[property]}\n    if md?\n      # First copy the \"globals\" metadata\n      _.extend(metadata, md.metadata) if md.metadata?\n      # Extend the \"overriden\" metadatas\n      _.extend(metadata, {required: md.required}) if md.required?\n      _.extend(metadata, {label: md.label}) if md.label?\n      _.extend(metadata, {domain: md.domain}) if md.domain?\n      #console.log \"property\", property,\"metadata\", metadata\n  return metadata\n   \n\n###------------------------------------------- FORM FOR THE INPUTS -------------------------------------------###\nHandlebars.registerHelper \"input_for\", (property, options) ->\n  #Initialize the variables which are options\n  html = undefined\n  translationRoot = undefined\n  dataType = undefined\n  #Read all the options if they exists\n  opt = options.hash or {}\n  metadata = getMetadataFor(property, this)\n  domain = domains_definition[metadata.domain] or {}\n  #console.log \"domain\", domain\n  isDisplayRequired = false\n  isRequired = ()=>\n    isDisplayRequired = false\n    if opt.isRequired?\n      isDisplayRequired = opt.isRequired\n    else if metadata.required?\n      isDisplayRequired = metadata.required\n    return if isDisplayRequired then \"<span class='input-group-addon'>*</span>\" else \"\"\n  #isRequired = if !opt.isRequired? or !opt.isRequired then \"\" else \"<span class='input-group-addon'>*</span>\"\n  translationRoot = opt.translationRoot or undefined\n  dataType = opt.dataType or domain.type or \"text\"\n  (dataType = \"checkbox\") if dataType is \"boolean\"\n  readonly = opt.readonly or false\n  readonly = if readonly then \"readonly\" else \"\"\n  disabled = opt.disabled or false\n  disabled = if disabled then \"disabled\" else \"\"\n  inputAttributes= opt.inputAttributes or \"\"\n  #Add bootstrap-switch css to checkbox input.\n  containerAttribs = opt.containerAttribs or \"\"\n  containerCss = opt.containerCss or \"\"\n  labelSizeValue = if opt.isNoLabel then 0 else if opt.labelSize then opt.labelSize else 4\n  labelSize = \"col-sm-#{labelSizeValue} col-md-#{labelSizeValue} col-lg-#{labelSizeValue}\"\n  #Deal with the inputSize\n  inputSize = ()=>\n    #When it's a checkbox from BootstrapSwitch the input size is equal to zero.\n    if opt.containerCss\n      inputSize = \"\"\n    else\n      inputSizeValue = 12 - labelSizeValue\n      inputSize = opt.inputSize or \"col-sm-#{inputSizeValue} col-md-#{inputSizeValue} col-lg-#{inputSizeValue}\"\n\n  isAddOnInput = opt.icon? or (opt.isRequired || metadata.required) is true\n  #Get the value of the property\n  propertyValue =  ()=>\n    if this[property]?\n      if dataType is \"checkbox\"\n        if this[property] then return 'checked'\n      if dataType is \"date\" and this[property] isnt \"\"\n        formatedDate = moment(this[property]).format(\"YYYY-MM-DD\")\n        return \"value='\" + formatedDate + \"'\"\n      else return \"value='#{_.escape(this[property])}'\"\n    \"\" \n  #Get the value of the transalated label.\n  translationKey =()=>\n    translation = metadata.label or (\"#{this['modelName']}.#{property}\" if this['modelName']?) or \"\"\n    if translationRoot?\n      translation = ((if (translationRoot?) and typeof translationRoot is \"string\" then translationRoot + \".\" else \"\")) + property\n    \n    return if(translation is \"\") then \"\" else i18n.t(translation)\n   \n  #Deal with the icon case\n  icon = ()=>  \n    #<span class='glyphicon glyphicon-#{opt.icon}'></span>\n    if opt.icon? then \"<span class='input-group-addon'><i class='fa fa-#{opt.icon}  fa-fw'></i> </span>\" else \"\"\n  #Deal with the label\n  label = ()=>\n    if opt.isNoLabel?\n      return \"\"\n    else\n      return \"<label class='control-label #{labelSize}' for='#{property}'>#{translationKey()}</label>\"\n    #if not opt.isNoLabel? then \"<label class='control-label #{labelSize}' for='#{property}'> #{translationKey} </label>\" else \"\"\n  #By default there is a placeholder or if the preperty is true.\n  placeholder = if !opt.placeholder? or opt.placeholder then \"placeholder='#{translationKey()}'\" else \"\"\n  #Initialize the errors variables => Is there an error, if yes what is the message.\n  error = \"\"\n  error = \"has-error\" if @errors? and @errors[property]?\n  errorValue = if @errors? and @errors[property]? then @errors[property] else \"\"\n  errorSize = ()=>\n    errorLength = 12 - labelSizeValue\n    offsetError = labelSizeValue\n    return \"col-sm-#{errorLength} col-md-#{errorLength} col-lg-#{errorLength} col-sm-offset-#{offsetError} col-md-offset-#{offsetError} col-lg-offset-#{offsetError}\"\n  #Deal with error\n  errors = ()=>\n    if error == \"has-error\" then \"<span class='#{error} #{errorSize()} help-inline pull-left' style='color:#b94a48'> #{errorValue } </span>\" else \"\"\n  #Build the html tag.\n  # <div class=\"form-group\">\n  #     <label for=\"exampleInputEmail\">Email address</label>\n  #     <input type=\"text\" class=\"form-control\" id=\"exampleInputEmail\" placeholder=\"Enter email\">\n  #   </div>\n  html = \"\n          <div class='form-group #{error}'>\n            #{label()}\n            <div class='#{if isAddOnInput then 'input-group' else \"\"} #{inputSize()} #{containerCss}' #{containerAttribs}>\n               #{icon()}\n              <input id='#{property}' class='form-control input-sm' data-name='#{property}' type='#{dataType}' #{inputAttributes} #{placeholder} #{propertyValue()} #{readonly} #{disabled}/>\n              #{isRequired()}\n            </div>\n            #{errors()}\n          </div>\n        \"\n  new Handlebars.SafeString(html)\n\n#Generate a optionset selector. https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\nHandlebars.registerHelper \"options_selected\", (property, options) ->\n  opt = options.hash or {}\n  optName = if opt.optName? then \"data-name='#{opt.optName}'\" else \"\"\n  optToTriggerName = if opt.optToTriggerName? then \"data-opttotrigger-name='#{opt.optToTriggerName}'\" else \"\"\n  optToTriggerListKey = if opt.optToTriggerListKey? then \"data-opttotrigger-listkey='#{opt.optToTriggerListKey}'\" else \"\"\n  optMapping = if opt.optMapping? then this[opt.optMapping] else null\n  dataMapping = if optMapping? then \"data-mapping=#{optMapping}\" else \"\"\n  list = this[opt.listKey] or []\n  selected = this[property] or opt.selected or undefined\n  if(opt.addDefault)\n    list =[{id: undefined, label: ''}].concat(list)\n  metadata = getMetadataFor(property, this)\n  domain = domains_definition[metadata.domain] or {}\n  #console.log \"domain\", domain\n  isRequired = ()=>\n    isDisplayRequired = false\n    if opt.isRequired?\n      isDisplayRequired = opt.isRequired\n    else if metadata.required?\n      isDisplayRequired = metadata.required\n    return if isDisplayRequired then \"<span class='input-group-addon'>*</span>\" else \"\"\n  translationRoot = opt.translationRoot or undefined\n  isAtLine = opt.isAtLine or false\n  readonly = opt.readonly or false\n  readonly = if readonly then \"disabled\" else \"\"\n  labelSizeValue = if opt.isNoLabel then 0 else if opt.labelSize then opt.labelSize else 4\n  labelSize = \"col-sm-#{labelSizeValue} col-md-#{labelSizeValue} col-lg-#{labelSizeValue}\"\n  inputSizeValue = 12 -labelSizeValue\n  inputSize = opt.inputSize or \"col-sm-#{inputSizeValue} col-md-#{inputSizeValue} col-lg-#{inputSizeValue}\"\n  #Get the value of the transalated label.\n  #Get the value of the transalated label.\n  translationKey =()=>\n    translation = metadata.label or (\"#{this['modelName']}.#{property}\" if this['modelName']?) or \"\"\n    if translationRoot?\n      translation = ((if (translationRoot?) and typeof translationRoot is \"string\" then translationRoot + \".\" else \"\")) + property\n    \n    return if(translation is \"\") then \"\" else i18n.t(translation)\n  icon = ()=>  \n  #<span class='glyphicon glyphicon-#{opt.icon}'></span>\n    if opt.icon? then \"<span class='input-group-addon'><i class='fa fa-#{opt.icon} fa-fw'></i> </span>\" else \"\"\n    #if opt.icon? then \"<span class='input-group-addon'> <span class='glyphicon glyphicon-#{opt.icon}'></span></span>\" else \"\"\n  isAddOnInput = opt.icon? or (opt.isRequired || metadata.required) is true\n   #Deal with the label\n  label = ()=>\n    if not opt.isNoLabel?\n      if isAtLine\n        \"<div class='row'><label class='control-label for='#{property}'> #{translationKey()} </label></div>\"\n      else\n        \"<label class='control-label #{labelSize}' for='#{property}'> #{translationKey()} </label>\" \n    else \"\"\n  #Initialize the errors variables => Is there an error, if yes what is the message.\n  error = \"\"\n  error = \"has-error\" if @errors? and @errors[property]?\n  errorValue = if @errors? and @errors[property]? then @errors[property] else \"\"\n  #Deal with error\n  errors = ()=>\n    if error == \"has-error\" then \"<span class='#{error} help-inline pull-left' style='color:#b94a48'> #{errorValue } </span>\" else \"\"\n  jsonGiven = this\n  #We define a small addOption function in order to add an option to the select.\n  addOption = (elt) ->\n    id = elt.id\n    prop = elt.label\n    isSelected = if selected? and id? and id.toString() is selected.toString() then \"selected\" else \"\"\n    html+= \"<option value= '#{id}' data-name='#{property}' #{isSelected}>#{prop}</option>\"\n    return undefined\n  #Initialize the html  \n  html = \"<div class='form-group #{error}'>\n            #{label()}\n            <div class='controls #{inputSize}'>\n              <div class='input-group'>\n                #{icon()}                \n                <select id='#{property}' #{readonly} #{optName} #{optToTriggerName} #{optToTriggerListKey} #{dataMapping} class='form-control input-sm'>\"\n  #add options foreach options in the list\n  addOption(elt) for elt in list\n  html +=      \"</select>#{isRequired()} \n              </div>\n              #{errors()}\n            </div>\n          </div>\"  \n  new Handlebars.SafeString(html)\n\n# Format a date using moment.js.\nHandlebars.registerHelper \"dateFormat\",(_date, options) ->\n  formatedDate = ''\n  if _date\n    opt = options.hash or {}\n    format = opt.format or require('../config').dateFormat# Todo: reenable or require('./configuration').getConfiguration().format.date\n    formatedDate = moment(_date).format(format)\n  new Handlebars.SafeString(formatedDate)\n\n#S4  \nS4 = ->\n  (((1 + Math.random()) * 0x10000) | 0).toString(16).substring 1\n\n#Generate a pseudo-GUID by concatenating random hexadecimal.\nguid = ->\n  S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4()\n\n# Example => button \"transalationKey\", icon=\"heart\" id=\"12\" class=\"btn-danger\" type=\"submit\"\nHandlebars.registerHelper \"button\",(text_key, options) ->\n  #console.log \"button\", i18n.t(text_key)\n  opt = options.hash or {}\n  isScript = if typeof opt.isScript is \"undefined\" then true else opt.isScript\n  cssClass = opt.class or \"\"\n  cssId = opt.id or guid()\n  type = opt.type or \"button\"\n  script = ()->\n    if isScript and type is 'submit' then \"<script type='text/javascript'>$('##{cssId}').on('click', function(){$(this).button('loading');});</script>\" else \"\"\n  icon = ()->\n     if opt.icon? then \"<i class='fa fa-fw fa-#{opt.icon}'></i>\" else \"\"\n  button = \"<button type='#{type}' class='btn #{cssClass}' id='#{cssId}' data-loading-text='#{i18n.t('button.loading')}'>#{icon()} #{if text_key isnt '' then i18n.t(text_key) else ''}</button>#{script()}\"\n  new Handlebars.SafeString(button)\n\n# display pagination on table \n# consume an object in the this which is : \n# `{currentPage: currentPage, firstPage: firstPage, totalPages: totalPages}`\nHandlebars.registerHelper \"paginate\", (property, options)->\n  options = options or {}\n  options = options.hash or {}\n  currentPage = this.currentPage\n  firstPage = this.firstPage or 0\n  endPage = (this.totalPages or 0) + firstPage\n  generateLeftArrow = ()->\n    className = if currentPage is firstPage then \"disabled\" else \"\"\n    return \"<li class='#{className}' data-page='#{firstPage}'><a href='#' data-bypass>&laquo;</a></li>\"\n  generatePageNumber= ()->\n    html = \"\"\n    (html+= \"<li class='#{if i is currentPage then 'active' else ''}'><a href='#' data-bypass data-page='#{i}'>#{i}</a></li>\") for i in [firstPage..endPage]\n    return html\n  generateRigthArrow = ()->\n    className = if currentPage is endPage then \"disabled\" else \"\"\n    return \"<li class='#{className}' data-page='#{endPage}'><a href='#' data-bypass>&raquo;</a></li>\"\n  return new Handlebars.SafeString(\"<ul class='pagination'>#{generateLeftArrow()}#{generatePageNumber()}#{generateRigthArrow()}</ul>\")\n\n# display sort icon on table column\n# `{sortField: sortField, order: order, modelName: modelName}`\nHandlebars.registerHelper \"sortColumn\", (property, options)->\n  options = options.hash or {}\n  sortField = this.sortField\n  order = this.order || \"asc\"\n  translationKey = options.translationKey or undefined\n  generateSortPosition= ()->\n    icon = \"fa fa-sort\"\n    if property is sortField\n      icon+= \"-\" + order\n    return \"<i class='#{icon}' data-name='#{property}'></i>\"\n  return new Handlebars.SafeString(\"<a class='sortColumn' href='#' data-name='#{property}' data-bypass>#{i18n.t(translationKey)} #{generateSortPosition()}</a>\")\n\n# Currency helper in order to have a vizualization for the currency.\n## Todo: reenable when number format is needed..\n###Handlebars.registerHelper \"currency\",(property, options) ->  \n  currencySymbol = ''\n  value = ''\n  if (+this[property])? or +this[property] is 0\n    value = +this[property]\n  if typeof value is 'number'\n    value = numeral(value).format(require('./configuration').getConfiguration().format.currency) if value isnt ''#value.toFixed('2') \n    new Lawnchair({name: 'products'}, $.noop).get('currency', (curr)-> currencySymbol = curr.currencySymbol)\n  html = \"<div class='currency'><div class='right'>#{value} #{currencySymbol}</div></div>\"\n  new Handlebars.SafeString(html)###","var root = require('../config').apiroot;\n\nvar urls = {\n  //Deals with all the nantissement urls.\n  nantissement:{\n    pret: root + \"/pret\"\n  },\n\tvirtualMachine:               root + 'vm',\n\treference: root + 'reference'\n};\nmodule.exports = urls;","# Base class for all models. Define all transverses methods on the model.\nmodule.exports = class Model extends Backbone.Model\n  #Define a method in order to be able to quickly remove errors form the model.\n  unsetErrors: ()->\n    @unset('errors', {silent: true})\n  #Define a setErrors method in order to quickly be able to set Errors.\n  setErrors:(errors)->\n    @set({'errors': errors}) if errors?\n  metadatas:\n    papa:\n      \"domain\": \"DO_TEXTE_50\"\n      \"required\": true\n  # The model name can be define.\n  modelName: undefined\n  labels:\n    papa: \"model.papa\"\n  toJSON: ()->\n    jsonModel = super()\n    jsonModel.metadatas =  @metadatas\n    jsonModel.modelName = @modelName\n    jsonModel.papa = 'singe'\n    return jsonModel\n\n","/*global Backbone*/\n//Notification model\nmodule.exports = Backbone.Model.extend({\n\tdefaults: {\n\t\ttype: undefined, //error/warning/success...\n\t\tmessage: undefined, // The message which have to be display.,\n\t\tcreationDate: new Date()\n\t}\n});","/*global _, Backbone*/\n//We get the model of the collection.\nvar Notification = require('./notification');\n//This collection will contains all the message which will be display in the application.\nmodule.exports = Backbone.Collection.extend({\n\tmodel: Notification,\n\t// Return a constructed object filtered by error type.\n\tgetMessagesByType: function filterByTypeMessage() {\n\t\tvar jsonCollection = this.toJSON();\n\t\tvar messages = {};\n\t\tmessages.errorMessages = _.where(jsonCollection, {\n\t\t\t'type': 'error'\n\t\t});\n\t\tmessages.warningMessages = _.where(jsonCollection, {\n\t\t\t'type': 'warning'\n\t\t});\n\t\tmessages.infoMessages = _.where(jsonCollection, {\n\t\t\t'type': 'info'\n\t\t});\n\t\tmessages.successMessages = _.where(jsonCollection, {\n\t\t\t'type': 'success'\n\t\t});\n\t\treturn messages;\n\t},\n\t//Create a comparatot method in order to be able to sort them on their type\n\tcomparator: function comparator(notification) {\n\t\treturn notification.get(\"creationDate\");\n\t}\n});","/*global Backbone*/\nvar ArgumentInvalidException = require('../../lib/custom_exception').ArgumentInvalidException;\n\nmodule.exports = Backbone.Collection.extend({\n  //first number of page\n  firstPage: 0,\n  //the page loaded\n  currentPage: 0,\n  // number of records par page\n  perPage: 3,\n  // total number og pages. default initialization\n  totalPages: 10,\n  //sort fields\n  sortField: {},\n\n  pageInfo: function pageInfo(){\n    var info = {\n      // If parse() method is implemented and totalRecords is set to the length\n      // of the records returned, make it available. Else, default it to 0\n      totalRecords: this.totalRecords || 0,\n      currentPage: this.currentPage,\n      firstPage: this.firstPage,\n      totalPages: Math.ceil(this.totalRecords / this.perPage),\n      lastPage: this.totalPages, // should use totalPages in template\n      perPage: this.perPage,\n      previous: false,\n      next: false,\n      sortField: this.sortField\n    };\n\n    if (this.currentPage > 1) {\n      info.previous = this.currentPage - 1;\n    }\n\n    if (this.currentPage < info.totalPages) {\n      info.next = this.currentPage + 1;\n    }\n\n    // left around for backwards compatibility\n    info.hasNext = info.next;\n    info.hasPrevious = info.next;\n\n    this.information = info;\n    return info;\n  },\n\n  setPage: function setPage(page){\n    page = page || 0;\n    this.currentPage = page;\n  },\n\n  setNextPage: function setNextPage(){\n    //TODO : controller si pas de page suivante\n    this.currentPage++;\n  },\n\n  setPreviousPage: function setPreviousPage(){\n    //TODO: controller si pas de page précedente\n    this.currentPage--;\n  },\n\n  setSortField: function setSortField(field, order){\n    order = order || \"asc\";\n    if(field === undefined || (order !== \"asc\" && order !== \"desc\")){\n      throw new ArgumentInvalidException(\"sort arguments invalid\");\n    }\n    this.sortField = {\n      field: field,\n      order: order\n    };\n\n    this.currentPage = this.firstPage;\n  },\n\n  setTotalRecords: function setTotalRecords(totalRecords){\n    this.totalRecords = totalRecords;\n  }\n});","/*global Backbone*/\n//var template = require(\"../template/collection-pagination\");\n\nmodule.exports = Backbone.View.extend({\n  Service: undefined,\n\n  initialize: function initializePagination(){\n\n  },\n\n  events:{\n\n  },\n\n  goToPage: function goToPage(page){\n    this.model.setPage(page);\n  },\n\n  nextPage: function nextPage(){\n    this.model.setNextPage();\n  },\n\n  previousPage: function PreviousPage(){\n    this.model.setPreviousPage();\n  },\n\n  render: function renderPagination(){\n    if (this.model.length === 0) {\n      this.$el.html(\"\");\n    }else{\n      this.$el.html(this.template(this.model.pageInfo()));\n    }\n  }\n});","var NotImplementedException = require('../../lib/custom_exception').NotImplementedException;\nvar ErrorHelper = require('../../lib/error_helper');\n\nmodule.exports = Backbone.View.extend({\n\ttagName: 'div',\n\tclassName: 'consultView',\n\tgetModel: undefined,\n\tdeleteModel: undefined,\n\n\tinitialize: function initializeConsult() {\n\t\t//render view when the model is loaded\n\t\tthis.model.on('change', this.render, this);\n\t\tif (this.model.has('id')) {\n\t\t\tvar view = this;\n\t\t\tthis.getModel(this.model.get('id'))\n\t\t\t\t.then(function success(jsonModel){\n\t\t\t\t\tview.model.set(jsonModel);\n\t\t\t\t})\n\t\t\t\t.catch(function error(error){\n\t\t\t\t\tconsole.log('erreur : ' + error);\n\t\t\t\t});\n\t\t}\n\t},\n\n\tevents: {\n\t\t\"click button#btnEdit\": \"edit\",\n\t\t\"click button#btnDelete\": \"delete\"\n\t},\n\n\t//JSON data to attach to the template.\n\tgetRenderData: function getRenderDataConsult() {\n\t\tthrow new NotImplementedException('getRenderData');\n\t},\n\n\t//genarate navigation url.\n\tgenerateEditUrl: function generateEditUrl(){\n\t\treturn this.model.modelName + \"/edit/\" + this.model.get('id');\n\t},\n\n\tedit: function editVm(event) {\n\t\tevent.preventDefault();\n\t\tBackbone.history.navigate(this.generateEditUrl(), true);\n\t},\n\n\tdelete: function deleteConsult(event) {\n\t\tevent.preventDefault();\n\t\tvar view = this;\n\t\t//call suppression service\n\t\tthis.deleteModel()\n\t\t\t.then(function success(success) {\n\t\t\t\tview.deleteSuccess(success);\n\t\t\t}, function error(errorResponse) {\n\t\t\t\tview.deleteError(errorResponse);\n\t\t\t})\n\t},\n\n\t//Generate delete navigation url.\n\tgenerateDeleteUrl: function generateDeleteUrl(){\n\t\treturn \"/\";\n\t},\n\n\t// Actions after a delete success.\n\tdeleteSuccess: function deleteConsultSuccess(response) {\n\t\t//remove the view from the DOM\n\t\tthis.remove();\n\t\t//navigate to next page\n\t\tBackbone.history.navigate(generateDeleteUrl(), true);\n\t},\n\n\t// Actions after a delete error. \n\tdeleteError: function deleteConsultError(errorResponse) {\n\t\tErrorHelper.manageResponseErrors(errorResponse, {\n\t\t\tisDisplay: true\n\t\t});\n\t},\n\n\trender: function renderVirtualMachine() {\n\t\tvar jsonModel = this.getRenderData();\n\t\tthis.$el.html(this.template(jsonModel));\n\t\treturn this;\n\t}\n});","/*global Backbone, _, $, i18n*/\nvar form_helper = require('../../lib/form_helper');\nvar _url = require('../../lib/url_helper');\nvar ErrorHelper = require('../../lib/error_helper');\nvar ModelValidator = require('../../lib/model-validation-promise');\n\n//var VmSvc = require('../service/ServiceVirtualMachine');\n\nmodule.exports = Backbone.View.extend({\n\ttagName: 'div',\n\tclassName: 'editView',\n\tsaveModel: undefined, //VmSvc.save\n\tgetModel: undefined, //VmSvc.get\n\n\tinitialize: function initializeEdit() {\n\t\tthis.model.on('change', this.render, this);\n\t\tthis.listenTo(this.model, 'validated:valid', this.modelValid);\n\t\tthis.listenTo(this.model, 'validated:invalid', this.modelInValid);\n\t\tif (this.model.has('id')) {\n\t\t\tvar view = this;\n\t\t\tthis.getModel(this.model.get('id'))\n\t\t\t\t.then(function success(jsonModel){\n\t\t\t\t\tview.model.set(jsonModel);\n\t\t\t\t});\n\t\t}\n\t},\n\n\tevents: {\n\t\t\"click button[type='submit']\": \"save\",\n\t\t\"click button#btnCancel\": \"cancelEdition\",\n\t},\n\n\t//JSON data to attach to the template.\n\tgetRenderData: function getRenderDataEdit() {\n\t\tthrow new NotImplementedException('getRenderData');\n\t},\n\n\tsave: function saveEdit(event) {\n\t\tevent.preventDefault();\n\t\tform_helper.formModelBinder({\n\t\t\tinputs: $('input', this.$el)\n\t\t}, this.model);\n\n\t\tvar currentView = this;\n\t\tModelValidator.validate(currentView.model)\n\t\t\t.then(function() {\n\t\t\t\tcurrentView.model.unsetErrors();\n\t\t\t\tcurrentView.saveModel(currentView.model.toJSON())\n\t\t\t\t\t.then(function success(jsonModel){\n\t\t\t\t\t\tcurrentView.saveSuccess(jsonModel);\n\t\t\t\t\t})\n\t\t\t\t\t.catch (function error(responseError){\n\t\t\t\t\t\tcurrentView.saveError(responseError);\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch (function error(errors){\n\t\t\t\tcurrentView.model.setErrors(errors);\n\t\t\t});\n\t},\n\n\t//Actions on save success.\n\tsaveSuccess: function saveSuccess(jsonModel) {\n\t\tBackbone.Notification.addNotification({\n\t\t\ttype: 'success',\n\t\t\tmessage: i18n.t('virtualMachine.save.' + (jsonModel.isCreate ? 'create' : 'update') + 'success')\n\t\t});\n\t\tvar url = this.generateNavigationUrl();\n\t\tBackbone.history.navigate(url, true);\n\t},\n\n\t//Actions on save error\n\tsaveError: function saveError(errors) {\n\t\tErrorHelper.manageResponseErrors(errors, {\n\t\t\tmodel: this.model\n\t\t});\n\t},\n\n\tgenerateNavigationUrl: function generateNavigationUrl(){\n\t\tif(this.model.get('id') === null || this.model.get('id') === undefined){\n\t\t\treturn \"/\";\n\t\t}\n\t\treturn _url.generateUrl([\"virtualMachine\", this.model.get(\"id\")], {});\n\t}, \n\n\tcancelEdition: function cancelEdition() {\n\t\tvar url = this.generateNavigationUrl();\n\t\tBackbone.Notification.clearNotifications();\n\t\tBackbone.history.navigate(url, true);\n\t},\n\n\trender: function renderEdit() {\n\t\tvar jsonModel = this.getRenderData();\n\t\tthis.$el.html(this.template(jsonModel));\n\t\treturn this;\n\t}\n});","/*global Backbone*/\nvar template = require('./templates/notifications');\nmodule.exports = Backbone.View.extend({\n\ttagName: 'div',\n\tclassName: 'notifications',\n\ttemplate: template,\n\t//Render each type of notification.\n\trender: function() {\n\t\tvar messages = this.model.getMessagesByType();\n\t\t/*We have to add css property to the message in order  to use the same template.*/\n\t\tvar messageToPrint = {};\n\t\tmessageToPrint.errorMessages = {\n\t\t\tmessages: messages.errorMessages,\n\t\t\tcssMessageType: 'danger'\n\t\t};\n\t\tmessageToPrint.warningMessages = {\n\t\t\tmessages: messages.warningMessages,\n\t\t\tcssMessageType: 'warning'\n\t\t};\n\t\tmessageToPrint.successMessages = {\n\t\t\tmessages: messages.successMessages,\n\t\t\tcssMessageType: 'success'\n\t\t};\n\t\tmessageToPrint.infoMessages = {\n\t\t\tmessages: messages.infoMessages,\n\t\t\tcssMessageType: 'info'\n\t\t};\n\t\tthis.$el.html('');\n\t\t//In order to call the templat only if needed.\n\t\tfunction printMessageIfExists(messageContainerName, context) {\n\t\t\tif (messages[messageContainerName].length > 0) {\n\t\t\t\tcontext.$el.append(template(messageToPrint[messageContainerName]));\n\t\t\t}\n\t\t}\n\t\tprintMessageIfExists('errorMessages',this);//The this is put into a closure in order to not lose it.\n\t\tprintMessageIfExists('warningMessages',this);\n\t\tprintMessageIfExists('infoMessages', this);\n\t\tprintMessageIfExists('successMessages', this);\n\t\treturn this;\n\t},\n\tinitialize: function initialize() {\n\t\t//We bind the model changes to a render.\n\t\tthis.model.on('change', function() {\n\t\t\tthis.render();\n\t\t});\n\t}\n});","/*global Backbone, i18n, $*/\nvar NotImplementedException = require('../../lib/custom_exception').NotImplementedException;\nvar _url = require('../../lib/url_helper');\nvar templatePagination = require('../templates/collection-pagination');\n\nmodule.exports = Backbone.View.extend({\n\ttagName: 'div',\n\tclassName: 'resultView',\n\tresultsPagination: 'div#pagination',\n\ttemplatePagination: templatePagination,\n\tinitialize: function initializeSearchResult(options) {\n\t\tthis.listenTo(this.model, \"reset\", function(){this.render({isSearchTriggered: true});}, this);\n\t},\n\tevents: {\n\t\t'click tbody tr': 'lineSelection',\n\t\t'click .pagination li': 'goToPage',\n\t\t'click a.sortColumn': 'sortCollection'\n\t},\n\n\tsortCollection: function sortCollection(event){\n\t\tevent.preventDefault();\n\t\tvar collectionInfos = this.model.pageInfo();\n\t\tvar sortField = event.target.getAttribute(\"data-name\");\n\t\tvar currentSort = collectionInfos.sortField;\n\t\tvar order = \"asc\";\n\t\tif(currentSort !==undefined && sortField === currentSort.field && currentSort.order === \"asc\"){\n\t\t\torder = \"desc\";\n\t\t}\n\t\tthis.model.setSortField(sortField,order);\n\t\tthis.fetchDemand();\n\t},\n\n\tgoToPage: function goToPage(event){\n\t\tevent.preventDefault();\n\t\tvar page = +event.target.getAttribute(\"data-page\");\n\t\tthis.model.setPage(page);\n\t\tthis.fetchDemand();\n\t},\n\n\tnextPage: function nextPage(event){\n\t\tevent.preventDefault();\n\t\tthis.model.setNextPage();\n\t\tthis.fetchDemand();\n\t},\n\n\tpreviousPage: function PreviousPage(event){\n\t\tevent.preventDefault();\n\t\tthis.model.setPreviousPage();\n\t\tthis.fetchDemand();\n\t},\n\n\tfetchDemand: function fetchDemand(){\n\t\tthis.trigger('results:fetchDemand');\n\t},\n\n\tlineSelection: function lineSelectionSearchResults(event){\n\t\tevent.preventDefault();\n\t\t//throw new NotImplementedException('lineSelection');\n\t\tvar id = +event.target.parentElement.getAttribute('id');\n\t\t//Navigate \n\t\tvar url = _url.generateUrl([this.model.model.prototype.modelName, id]);\n\t\t//Backbone.Notification.clearNotifications();\n\t\tBackbone.history.navigate(url, true);\n\t},\n\n\trender: function renderSearchResults(options) {\n\t\toptions = options || {};\n\t\t//If the research was not launch triggered.\n\t\tif(!options.isSearchTriggered){return this;}\n\t\t//If there is no result.\n\t\tif (this.model.length === 0) {\n\t\t\t//Is recherche launched.\n\t\t\tthis.$el.html(\"<p>No results...</p>\");\n\t\t\tBackbone.Notification.addNotification({\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\tmessage: i18n.t('search.noResult')\n\t\t\t\t}, true);\n\t\t} else {\n\t\t    //the template must have named property to iterate over it\n\t\t    var infos = this.model.pageInfo();\n\t\t\tthis.$el.html(this.template({\n\t\t\t\tcollection: this.model.toJSON(),\n\t\t\t\tsortField: infos.sortField.field,\n\t\t\t\torder: infos.sortField.order\n\t\t\t}));\n\n\t\t\t//render pagination\n\t\t\t$(this.resultsPagination, this.$el).html(this.templatePagination(this.model.pageInfo()));//TODO : this.model.pageInfo() {currentPage: 0, firstPage: 0, totalPages: 10}\n\t\t}\n\t\treturn this;\n\t}\n});","/*global Backbone, _, $, Promise*/\nvar NotImplementedException = require('../../lib/custom_exception').NotImplementedException;\nvar form_helper = require('../../lib/form_helper');\nvar ModelValidator = require('../../lib/model-validation-promise');\nvar ErrorHelper = require('../../lib/error_helper');\nvar RefHelper = require('../../lib/reference_helper');\n\nmodule.exports = Backbone.View.extend({\n\ttagName: 'div',\n\tclassName: 'searchView',\n\tResultsView: undefined,\n\tResults: undefined,\n\tsearch: undefined,\n\tresultsSelector: 'div#results',\n\tisMoreCriteria: false,\n\treferenceNames: undefined,\n\tinitialize: function initializeSearch(options) {\n\t\toptions = options || {};\n\t\tthis.isSearchTriggered = options.isSearchTriggered || false;\n\t\tthis.isReadOnly = options.isReadOnly || false;\n\t\tthis.model.set({\n\t\t\tisCriteriaReadonly: false\n\t\t}, {silent: true});\n\n\t\t//init results collection\n\t\tthis.searchResults = new this.Results();\n\t\t//handle the clear criteria action\n\t\tthis.listenTo(this.model, 'change', this.render);\n\t\t//initialization of the result view \n\t\tthis.searchResultsView = new this.ResultsView({\n\t\t\tmodel: this.searchResults,\n\t\t\tcriteria: this.model\n\t\t});\n\t\tthis.listenTo(this.searchResultsView, 'results:fetchDemand', function(){this.runSearch(null,{isFormBinded:false});});\n\t\tif (this.isSearchTriggered) {\n\t\t\tthis.runSearch(null, {\n\t\t\t\tisFormBinded: false\n\t\t\t});\n\t\t}\n\t\t//Load all the references lists which are defined in referenceNames.\n\t\t\n\t\tvar currentView = this;\n    Promise.all(RefHelper.loadMany(this.referenceNames)).then(function(results) {\n      var res = {};//Container for all the results.\n      for(var i =0, l= results.length;  i < l ; i++){\n        res[currentView.referenceNames[i].name] = results[i];\n        //The results are save into an object with a name for each reference list.\n      }\n      currentView.model.set(res); //This trigger a render due to model change.\n      currentView.isReady = true; //Inform the view that we are ready to render well.\n    }).catch(function(e) {\n        console.error(\"error when getting your stuff\", e);\n    });\n\t},\n\n\tevents: {\n\t\t\"submit form\": 'runSearch', // Launch the search.\n\t\t\"click button#btnReset\": 'clearSearchCriteria', // Reset all the criteria.\n\t\t\"click button#btnEditCriteria\": 'editCriteria', //Deal with the edit mode.\n\t\t\"click button.toogleCriteria\": 'toogleMoreCriteria'// Deal with the more / less criteria.\n\t},\n\t//Change the fact that the view is in the mode mode or less criteria.\n\ttoogleMoreCriteria: function toogleMoreCriteria() {\n\t\tthis.isMoreCriteria = !this.isMoreCriteria;\n\t\tform_helper.formModelBinder({\n\t\t\tinputs: $('input', this.$el)\n\t\t}, this.model);\n\t\tthis.render();\n\t},\n\t//get the JSON to attach to the template\n\tgetRenderData: function getRenderDataSearch() {\n\t\tthrow new NotImplementedException('getRenderData');\n\t},\n\n\teditCriteria: function editCriteria() {\n\t\tthis.model.set({\n\t\t\tisCriteriaReadonly: false\n\t\t});\n\t},\n\n\tsearchSuccess: function searchSuccess(jsonResponse) {\n\t\tthis.searchResults.setTotalRecords(jsonResponse.totalRecords);\n    this.searchResults.reset(jsonResponse.values);\n  },\n\tsearchError: function searchError(response) {\n\t\tErrorHelper.manageResponseErrors(response, {\n\t\t\tisDisplay: true\n\t\t});\n\t},\n\n\trunSearch: function runSearch(event, options) {\n\t\tif (event !== undefined && event !== null) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t\toptions = options || {};\n\t\tvar isFormBinded = options.isFormBinded || true;\n\t\t//bind form fields on model\n\t\tif (isFormBinded) {\n\t\t\tform_helper.formModelBinder({\n\t\t\t\tinputs: $('input', this.$el)\n\t\t\t}, this.model);\n\t\t}\n\t\tvar currentView = this;\n\t\tModelValidator\n\t\t  .validate(this.model)\n\t\t\t.then(function(model) {\n\t\t\t\tcurrentView.model.unsetErrors();\n\t\t\t\tcurrentView.search(currentView.model.toJSON(), currentView.searchResults.pageInfo())\n\t\t\t\t\t\t\t\t\t .then(function success(jsonResponse) {\n\t\t\t\t\t\t\t\t\t\t\treturn currentView.searchSuccess(jsonResponse);\n\t\t\t\t\t\t\t\t\t\t}).catch(function error(errorResponse) {\n\t\t\t\t\t\t\t\t\t\t\tcurrentView.searchError(errorResponse);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t}).catch (function error(errors) {\n\t\t\t\t\tcurrentView.model.setErrors(errors);\n\t\t\t\t});\n\t\tif (this.isReadOnly) {\n\t\t\tthis.model.set({\n\t\t\t\tisCriteriaReadonly: true\n\t\t\t});\n\t\t}\n\t},\n\n\tclearSearchCriteria: function clearSearchCriteria(event) {\n\t\tevent.preventDefault();\n\t\t//Backbone.Notification.clearNotifications();\n\t\tthis.model.clear();\n\t\tthis.initialize(); //Call initialize again in order to refresh the view with criteria lists.\n\t},\n\n\trender: function renderSearch() {\n\t\tthis.$el.html(this.template(_.extend({\n\t\t\tisMoreCriteria: this.isMoreCriteria\n\t\t}, this.getRenderData())));\n\t\t$(this.resultsSelector, this.$el).html(this.searchResultsView.render().el);\n\t\treturn this;\n\t}\n});\n\n/*ModelValidator.validate(this.model)\n\t\t\t.catch (currentView.model.setErrors)\n\t\t\t.then(function(model) {\n\t\t\t\tcurrentView.model.unsetErrors();\n\t\t\t\tcurrentView.search(currentView.model.toJSON())\n\t\t\t\t\t//.then(currentView.searchSuccess.bind(currentView))\n\t\t\t\t\t.then(currentView.searchResults.reset.bind(currentView.searchResults))\n\t\t\t\t\t.catch (currentView.searchError.bind(currentView))\n\t\t\t});*/"]}